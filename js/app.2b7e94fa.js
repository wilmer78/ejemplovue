(function(t){function e(e){for(var a,i,s=e[0],c=e[1],u=e[2],p=0,d=[];p<s.length;p++)i=s[p],r[i]&&d.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},r={app:0},o=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),r=n("bb71");n("da64");a["a"].use(r["a"],{iconfont:"md"});var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{staticClass:"grey lighten-3"},[n("v-content",[n("v-container",[n("v-layout",{attrs:{"text-xs-center":"",wrap:""}},[n("v-flex",{attrs:{"mb-4":""}},[n("h1",{staticClass:"display-2 font-weight-bold mb-3"},[t._v("\n            Portafolio de Inversión\n          ")]),n("p",{staticClass:"subheading font-weight-regular"},[t._v("\n            Utilizando Ethereum para Dapp Descentralizada\n          ")]),t.Connected?n("p",{staticClass:"subheading font-weight-regular",staticStyle:{color:"green"}},[n("strong",[t._v(t._s(t.account))])]):n("p",{staticClass:"subheading font-weight-regular",staticStyle:{color:"red"}},[n("strong",[t._v("\n            Por favor, instalar "),n("a",{attrs:{href:"https://metamask.io/"}},[t._v("Metamask de Ethereum")])])]),n("p",{staticClass:"subheading font-weight-regular"},[t._v(t._s(t.resultado))])])],1),t.Connected?n("v-layout",{attrs:{row:"","justify-center":""}},[n("v-dialog",{attrs:{"max-width":"600px",persistent:""},model:{value:t.startProjectDialog,callback:function(e){t.startProjectDialog=e},expression:"startProjectDialog"}},[n("v-btn",{attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("Nuevo Portafolio")]),n("v-card",[n("v-card-title",[n("span",{staticClass:"headline font-weight-bold mt-2 ml-4"},[t._v("\n                Nuevo Plan de Inversión\n              ")])]),n("v-card-text",{staticClass:"pt-0"},[n("v-container",{staticClass:"pt-0",attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Título","persistent-hint":""},model:{value:t.newProject.title,callback:function(e){t.$set(t.newProject,"title",e)},expression:"newProject.title"}})],1),n("v-flex",{attrs:{xs12:""}},[n("v-textarea",{attrs:{label:"Descripción","persistent-hint":""},model:{value:t.newProject.description,callback:function(e){t.$set(t.newProject,"description",e)},expression:"newProject.description"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{attrs:{label:"Cantidad requerida (ETH)",type:"number",step:"0.0001",min:"0"},model:{value:t.newProject.amountGoal,callback:function(e){t.$set(t.newProject,"amountGoal",e)},expression:"newProject.amountGoal"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{attrs:{label:"Duración (en días)",type:"number"},model:{value:t.newProject.duration,callback:function(e){t.$set(t.newProject,"duration",e)},expression:"newProject.duration"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(e){t.startProjectDialog=!1,t.newProject.isLoading=!1}}},[t._v("\n                Cerrar\n              ")]),n("v-btn",{attrs:{color:"blue darken-1",flat:"",loading:t.newProject.isLoading},on:{click:t.startProject}},[t._v("\n                Guardar\n              ")])],1)],1)],1)],1):t._e()],1),t.Connected?n("v-container",{attrs:{"grid-list-lg":""}},[n("h1",{staticClass:"display-1 font-weight-bold mb-3"},[t._v("\n        Portafolios \n      ")]),n("v-layout",{attrs:{row:"",wrap:""}},t._l(t.projectData,function(e,a){return n("v-flex",{key:a,attrs:{xs12:""}},[n("v-dialog",{attrs:{width:"800"},model:{value:e.dialog,callback:function(n){t.$set(e,"dialog",n)},expression:"project.dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline font-weight-bold"},[t._v("\n                "+t._s(e.projectTitle)+"\n              ")]),n("v-card-text",[t._v("\n                "+t._s(e.projectDesc)+"\n              ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",flat:"flat"},on:{click:function(e){t.projectData[a].dialog=!1}}},[t._v("\n                  Close\n                ")])],1)],1)],1),n("v-hover",{scopedSlots:t._u([{key:"default",fn:function(r){var o=r.hover;return n("v-card",{class:"elevation-"+(o?10:2)},[n("v-card-title",{attrs:{"primary-title":""}},[n("div",[n("div",{staticClass:"headline font-weight-bold"},[n("v-chip",{staticClass:"mt-0",attrs:{label:"",color:t.stateMap[e.currentState].color,"text-color":"white"}},[t._v("\n                    "+t._s(t.stateMap[e.currentState].text)+"\n                    ")]),t._v("\n                    "+t._s(e.projectTitle)+"\n                  ")],1),n("br"),n("span",[t._v(t._s(e.projectDesc.substring(0,100)))]),e.projectDesc.length>100?n("span",[t._v("\n                    ... "),n("a",{on:{click:function(e){t.projectData[a].dialog=!0}}},[t._v("[Show full]")])]):t._e(),n("br"),n("br"),n("small",[t._v("Up Until: "),n("b",[t._v(t._s(new Date(1e3*e.deadline)))])]),n("br"),n("br"),n("small",[t._v("Goal of "),n("b",[t._v(t._s(e.goalAmount/Math.pow(10,18))+" ETH ")])]),1==e.currentState?n("small",[t._v("wasn't achieved before deadline")]):t._e(),2==e.currentState?n("small",[t._v("has been achieved")]):t._e()])]),0==e.currentState&&t.account!=e.projectStarter?n("v-flex",{staticClass:"d-flex ml-3",attrs:{xs12:"",sm6:"",md3:""}},[n("v-text-field",{attrs:{label:"Amount (in ETH)",type:"number",step:"0.0001",min:"0"},model:{value:e.fundAmount,callback:function(n){t.$set(e,"fundAmount",n)},expression:"project.fundAmount"}}),n("v-btn",{staticClass:"mt-3",attrs:{color:"light-blue darken-1 white--text",loading:e.isLoading},on:{click:function(e){return t.fundProject(a)}}},[t._v("\n                  Fund\n                ")])],1):t._e(),n("v-flex",{staticClass:"d-flex ml-3",attrs:{xs12:"",sm6:"",md3:""}},[1==e.currentState?n("v-btn",{staticClass:"mt-3",attrs:{color:"amber darken-1 white--text",loading:e.isLoading},on:{click:function(e){return t.getRefund(a)}}},[t._v("\n                  Get refund\n                ")]):t._e()],1),0==e.currentState?n("v-card-actions",{staticClass:"text-xs-center"},[n("span",{staticClass:"font-weight-bold",staticStyle:{width:"200px"}},[t._v("\n                  "+t._s(e.currentAmount/Math.pow(10,18))+" ETH\n                ")]),n("v-progress-linear",{attrs:{height:"10",color:t.stateMap[e.currentState].color,value:e.currentAmount/e.goalAmount*100}}),n("span",{staticClass:"font-weight-bold",staticStyle:{width:"200px"}},[t._v("\n                  "+t._s(e.goalAmount/Math.pow(10,18))+" ETH\n                ")])],1):t._e()],1)}}],null,!0)})],1)}),1)],1):t._e()],1)],1)},i=[],s=n("e814"),c=n.n(s),u=n("b047"),l=n.n(u),p="0x4e0cAc2DFE003C3d869A0C237f2B9dEA3120f2E3",d=[{constant:!0,inputs:[],name:"returnAllProjects",outputs:[{name:"",type:"address[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"title",type:"string"},{name:"description",type:"string"},{name:"durationInDays",type:"uint256"},{name:"amountToRaise",type:"uint256"}],name:"startProject",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!1,name:"contractAddress",type:"address"},{indexed:!1,name:"projectStarter",type:"address"},{indexed:!1,name:"projectTitle",type:"string"},{indexed:!1,name:"projectDesc",type:"string"},{indexed:!1,name:"deadline",type:"uint256"},{indexed:!1,name:"goalAmount",type:"uint256"}],name:"ProjectStarted",type:"event"}],m=new l.a.providers.Web3Provider(window.ethereum),v=m.getSigner(),f=new l.a.Contract(p,d,v),y=f,b=[{constant:!0,inputs:[],name:"creator",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"amountGoal",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"raiseBy",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"contributions",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"title",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"completeAt",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"description",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"checkIfFundingCompleteOrExpired",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"getRefund",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"state",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"currentBalance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"contribute",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"getDetails",outputs:[{name:"projectStarter",type:"address"},{name:"projectTitle",type:"string"},{name:"projectDesc",type:"string"},{name:"deadline",type:"uint256"},{name:"currentState",type:"uint8"},{name:"currentAmount",type:"uint256"},{name:"goalAmount",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"projectStarter",type:"address"},{name:"projectTitle",type:"string"},{name:"projectDesc",type:"string"},{name:"fundRaisingDeadline",type:"uint256"},{name:"goalAmount",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"contributor",type:"address"},{indexed:!1,name:"amount",type:"uint256"},{indexed:!1,name:"currentTotal",type:"uint256"}],name:"FundingReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"recipient",type:"address"}],name:"CreatorPaid",type:"event"}],g=new l.a.providers.Web3Provider(window.ethereum),h=g.getSigner(),w=function(t){var e=new l.a.Contract(t,b,h);return e},j=new l.a.providers.Web3Provider(window.ethereum),x=j.getSigner(),_={name:"App",data:function(){return{Connected:ethereum.isConnected(),networkVersion:null,startProjectDialog:!1,account:null,resultado:null,stateMap:[{color:"primary",text:"Ongoing"},{color:"warning",text:"Expired"},{color:"success",text:"Completed"}],projectData:[{projectStarter:"Creador1",projectTitle:"Titulo1",projectDesc:"Descripcion 1",currentState:0,currentAmount:4,goalAmount:6},{projectStarter:"Creador1",projectTitle:"Titulo1",projectDesc:"Descripcion 1",currentState:1,currentAmount:4,goalAmount:6},{projectStarter:"Creador1",projectTitle:"Titulo1",projectDesc:"Descripcion 1",currentState:2,currentAmount:4,goalAmount:6}],valores:[1,2,3],newProject:{isLoading:!1}}},mounted:function(){this.getIni()},methods:{getIni:function(){var t=this;function e(t){window.loction.reload()}ethereum.enable(),ethereum.on("chainChanged",e),x.getAddress().then(function(e){t.account=e}),this.networkVersion=ethereum.networkVersion},ethWei:function(t){return 1e18*t},getPortafolio:function(){var t=this,e=w("0x7bE6A4951f786ac2Dd77D0c914ed84b69E06a5F5");e.getDetails().then(function(n){var a=n;a.contract=e,t.projectData.push(a)}),this.resultado=this.projectData},startProject:function(){this.newProject.isLoading=!0,y.startProject(this.newProject.title,this.newProject.description,this.newProject.duration,this.ethWei(this.newProject.amountGoal))},fundProject:function(t){var e=this;if(this.projectData[t].fundAmount){var n=this.projectData[t].contract;this.projectData[t].isLoading=!0,n.methods.contribute().send({from:this.account,value:web3.utils.toWei(this.projectData[t].fundAmount,"ether")}).then(function(n){var a=c()(n.events.FundingReceived.returnValues.currentTotal,10),r=c()(e.projectData[t].goalAmount,10);e.projectData[t].currentAmount=a,e.projectData[t].isLoading=!1,a>=r&&(e.projectData[t].currentState=2)})}},getRefund:function(t){var e=this;this.projectData[t].isLoading=!0,this.projectData[t].contract.methods.getRefund().send({from:this.account}).then(function(){e.projectData[t].isLoading=!1})}}},P=_,D=n("2877"),C=n("6544"),S=n.n(C),A=n("7496"),k=n("8336"),M=n("b0af"),T=n("99d9"),V=n("12b2"),E=n("cc20"),L=n("a523"),O=n("549c"),F=n("169a"),G=n("0e8f"),R=n("ce87"),$=n("a722"),H=n("8e36"),I=n("9910"),W=n("2677"),B=n("a844"),U=Object(D["a"])(P,o,i,!1,null,null,null),z=U.exports;S()(U,{VApp:A["a"],VBtn:k["a"],VCard:M["a"],VCardActions:T["a"],VCardText:T["b"],VCardTitle:V["a"],VChip:E["a"],VContainer:L["a"],VContent:O["a"],VDialog:F["a"],VFlex:G["a"],VHover:R["a"],VLayout:$["a"],VProgressLinear:H["a"],VSpacer:I["a"],VTextField:W["a"],VTextarea:B["a"]}),a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(z)}}).$mount("#app")}});
//# sourceMappingURL=app.2b7e94fa.js.map